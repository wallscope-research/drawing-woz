<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shared Canvas</title>
  <style>
    body {
      padding: 0;
      margin: 0;
    }
  </style>
  <script src="./p5.min.js"></script>
  <script src="./addons/p5.dom.min.js"></script>
  <script src="./addons/socket.io-client.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="./scripts/sketch.js"></script>
</head>

<body>
    <form>
        vID:<br>
        <input type="text" id="vid"><br>
        Answer:<br>
        <input type="text" id="answer" readonly>
      </form>

      <audio id="player" preload="auto"> 
        <source src="cereproc/test.ogg" /> 
      </audio>

      <button id="ok">Ok, what's next?</button>
      <button id="repeat">Could you repeat that please?</button>
      <button id="clarify">Can you clarify?</button><br>

      <textarea rows="2" cols="20">Test</textarea><br>
      <button id="guess">Guess</button><br>

      <button id="switch" onclick="window.location.href='/?id=1'">Switch<br>Player</button>

      <script>
        socket = io.connect('http://localhost:3000');

        $('#ok').click(function(){
          $.get({
            url: "/send-to-tts", 
            data: {
              text : "Ok", //"Ok, what is next", 
              vid : $('#vid').val()
            }
        }).done((res) => {
          console.log(res)
          // $('#player').attr("src", res);
          // $('#player').get(0).play();
          socket.emit('audio', res)
        })
        })
        
        $('#repeat').click(function(){
          $.get({
            url: "/send-to-tts", 
            data: {
              text : "Hi", //"Could you repeat that please", 
              vid : $('#vid').val()
            }
        }).done((res) => {
          console.log(res)
          // $('#player').attr("src", res);
          // $('#player').get(0).play();
          socket.emit('audio', res)
        })
        })

        $('#clarify').click(function(){
          $.get({
            url: "/send-to-tts", 
            data: {
              text : "Yo", //"Can you clarify", 
              vid : $('#vid').val()
            }
        }).done((res) => {
          console.log(res)
          // $('#player').attr("src", res);
          // $('#player').get(0).play();
          socket.emit('audio', res)
        })
        })

        socket.on('raudio', playOgg)

        function playOgg(oggUrl) {
          $('#player').attr("src", oggUrl);
          $('#player').get(0).play();
        }
      </script>
</body>

</html>